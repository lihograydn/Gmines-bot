<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Gmines Casino</title>
<style>
body { 
    font-family: Arial, sans-serif; 
    margin: 0; 
    background: #f0f2f5; 
    text-align: center; 
}
h1 { margin: 20px 0; }

/* –†–∞–∑–¥–µ–ª—ã */
.section { display: none; margin: 20px; }

/* –ü—Ä–æ—Ñ–∏–ª—å */
#profileSection {
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    color: #fff;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}
#profileSection p { margin: 10px 0; font-weight: bold; }

/* –ò–≥—Ä–æ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
.gameCard {
    display: inline-block;
    width: 120px;
    height: 120px;
    margin: 10px;
    border-radius: 20px;
    color: #fff;
    font-weight: bold;
    font-size: 18px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}
#minesCard { background: #3498db; }
#blackjackCard { background: #e74c3c; }

/* –ë–æ–Ω—É—Å */
#bonusSection {
    background: #f1c40f;
    border-radius: 15px;
    padding: 15px;
    margin: 15px auto;
    width: 90%;
    color: #2c3e50;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}
#bonusSection button {
    background: #2ecc71;
    color: #fff;
    border: none;
    border-radius: 12px;
    padding: 10px 15px;
    cursor: pointer;
    font-weight: bold;
}

/* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å */
#bottomBar {
    position: fixed; bottom: 0; left: 0; width: 100%;
    background: #fff; display: flex; justify-content: space-around;
    border-top: 1px solid #ccc; box-shadow: 0 -2px 5px rgba(0,0,0,0.1); padding: 10px 0;
}
.bottomTab { flex: 1; text-align: center; cursor: pointer; font-weight: bold; color: #3498db; }

/* –≠–∫—Ä–∞–Ω Mines */
#minesGameScreen {
    display: none;
    margin: 20px;
}
#minesCover {
    display: block;
    margin: 0 auto;
    width: 200px;
    height: 200px;
    border-radius: 20px;
    background: #3498db;
    color: #fff;
    font-weight: bold;
    font-size: 24px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}
#minesCover img { width: 60px; margin-top: 10px; }

#gameControls {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 15px;
}
#gameControls select, #gameControls button {
    border: none;
    border-radius: 12px;
    padding: 10px 15px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 3px 6px rgba(0,0,0,0.2);
}
#gameControls button { background: #2ecc71; color: #fff; }
#backButton { background: #e74c3c; color: #fff; }

#minesGame {
    display: grid;
    grid-template-columns: repeat(5, 60px);
    grid-gap: 10px;
    justify-content: center;
    margin: 20px 0;
}
.mineCell {
    width: 60px; height: 60px;
    border-radius: 12px;
    background: #3498db;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    box-shadow: 0 3px 6px rgba(0,0,0,0.2);
}
#gameInfo { margin: 10px 0; font-weight: bold; }
</style>
</head>
<body>

<h1>Gmines Casino</h1>

<!-- –ü—Ä–æ—Ñ–∏–ª—å -->
<div id="profileSection" class="section">
    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="playerName">–ò–≥—Ä–æ–∫</span>!</h2>
    <p>–ë–∞–ª–∞–Ω—Å: <span id="balanceDisplay">0</span> –º–æ–Ω–µ—Ç</p>
    <p>–°—ã–≥—Ä–∞–Ω–æ –∏–≥—Ä: <span id="totalGamesDisplay">0</span></p>
    <p>–ü—Ä–æ–∏–≥—Ä–∞–Ω–æ –º–æ–Ω–µ—Ç: <span id="lossesDisplay">0</span></p>
</div>

<!-- –ò–≥—Ä—ã -->
<div id="gamesSection" class="section">
    <div class="gameCard" id="minesCard">
        Mines
    </div>
    <div class="gameCard" id="blackjackCard" onclick="alert('Blackjack —Å–∫–æ—Ä–æ!')">21 üÉè</div>
    <div id="bonusSection">
        <span id="bonusText">–ë–æ–Ω—É—Å –¥–æ—Å—Ç—É–ø–µ–Ω!</span>
        <button id="collectBonusBtn">Collect</button>
    </div>
</div>

<!-- –≠–∫—Ä–∞–Ω Mines -->
<div id="minesGameScreen" class="section">

    <!-- –û–±–ª–æ–∂–∫–∞ –∏–≥—Ä—ã -->
    <div id="minesCover">
        –ú–∏–Ω—ã
        <img src="iconca.png" alt="–ú–∏–Ω—ã">
    </div>

    <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ -->
    <div id="gameControls" style="display:none;">
        <div>
            <label>–°—Ç–∞–≤–∫–∞: </label>
            <select id="stakeSelect">
                <option value="50">50</option>
                <option value="100">100</option>
                <option value="200">200</option>
                <option value="500">500</option>
            </select>
        </div>
        <div>
            <label>–ú–∏–Ω—ã: </label>
            <select id="minesSelect">
                <option value="1">1</option>
                <option value="3">3</option>
                <option value="5">5</option>
                <option value="8">8</option>
                <option value="12">12</option>
                <option value="15">15</option>
                <option value="20">20</option>
            </select>
        </div>
        <button id="startGame">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        <button id="cashOut">–ó–∞–±—Ä–∞—Ç—å –≤—ã–∏–≥—Ä—ã—à</button>
        <button id="backButton">–ù–∞–∑–∞–¥</button>
    </div>
    <div id="gameInfo" style="display:none;">
        –ë–∞–ª–∞–Ω—Å: <span id="balanceGame">0</span> | 
        –ú–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="multiplier">1.00</span>x
    </div>
    <div id="minesGame" style="display:none;"></div>
</div>

<!-- –¢–æ–ø -->
<div id="topSection" class="section">
    <h2>–¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤</h2>
    <ol id="topList"></ol>
</div>

<!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å -->
<div id="bottomBar">
    <div class="bottomTab" onclick="showSection('profile')">–ü—Ä–æ—Ñ–∏–ª—å</div>
    <div class="bottomTab" onclick="showSection('games')">–ò–≥—Ä—ã</div>
    <div class="bottomTab" onclick="showSection('top')">–¢–æ–ø</div>
</div>

<script>
// ---------------- –ò–≥—Ä–æ–∫ ----------------
let playerData = JSON.parse(localStorage.getItem('playerData')) || {
    balance: 1400, totalGames: 0, wins: 0, losses: 0, lastBonus: 0, id: 395852120, name: "–ò–≥—Ä–æ–∫"
};
let topPlayers = JSON.parse(localStorage.getItem('topPlayers')) || [];
document.getElementById('balanceDisplay').innerText = playerData.balance;
document.getElementById('balanceGame').innerText = playerData.balance;

// ---------------- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å ----------------
function showSection(section){
    document.getElementById('profileSection').style.display = 'none';
    document.getElementById('gamesSection').style.display = 'none';
    document.getElementById('topSection').style.display = 'none';
    document.getElementById('minesGameScreen').style.display = 'none';

    if(section==='profile') updateProfile();
    if(section==='top') updateTopList();

    document.getElementById(section+'Section').style.display = 'block';
}

// ---------------- –ü—Ä–æ—Ñ–∏–ª—å ----------------
function updateProfile(){
    document.getElementById('playerName').innerText = playerData.name;
    document.getElementById('balanceDisplay').innerText = playerData.balance;
    document.getElementById('totalGamesDisplay').innerText = playerData.totalGames;
    document.getElementById('lossesDisplay').innerText = playerData.losses;
}

// ---------------- –¢–æ–ø ----------------
function updateTopList(){
    topPlayers.sort((a,b)=>b.balance-a.balance);
    let list = document.getElementById('topList');
    list.innerHTML = '';
    topPlayers.slice(0,10).forEach(p=>{
        let li = document.createElement('li');
        li.innerText = `${p.name}: ${p.balance}`;
        list.appendChild(li);
    });
}

// ---------------- –ë–æ–Ω—É—Å ----------------
const bonusText = document.getElementById('bonusText');
const collectBtn = document.getElementById('collectBonusBtn');
collectBtn.onclick = function(){
    let now = Date.now();
    if(now - playerData.lastBonus >= 3600000){
        let bonus = Math.floor(Math.random()*1001)+500;
        playerData.balance += bonus;
        playerData.lastBonus = now;
        bonusText.innerText = "–ë–æ–Ω—É—Å –∑–∞–±—Ä–∞–Ω!";
        updateProfile();
        alert(`–í—ã –ø–æ–ª—É—á–∏–ª–∏ –±–æ–Ω—É—Å: ${bonus}!`);
    } else {
        let remaining = 3600000 - (now - playerData.lastBonus);
        let min = Math.floor(remaining/60000);
        let sec = Math.floor((remaining%60000)/1000);
        alert(`–ë–æ–Ω—É—Å –µ—â—ë –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: ${min} –º–∏–Ω ${sec} —Å–µ–∫`);
    }
}

// ---------------- Mines Game ----------------
let gridSize = 5;
let mines = [];
let revealed = [];
let multiplier = 1;
let stake = 50;
let totalMines = 3;
let gameActive = false;

// ---------------- –û–±–ª–æ–∂–∫–∞ –∏–≥—Ä—ã ----------------
document.getElementById('minesCard').onclick = function(){
    document.getElementById('gamesSection').style.display = 'none';
    document.getElementById('minesGameScreen').style.display = 'block';
    document.getElementById('minesCover').style.display = 'flex';
    document.getElementById('gameControls').style.display = 'none';
    document.getElementById('gameInfo').style.display = 'none';
    document.getElementById('minesGame').style.display = 'none';
};

// ---------------- –ö–ª–∏–∫ –ø–æ –æ–±–ª–æ–∂–∫–µ ----------------
document.getElementById('minesCover').onclick = function(){
    this.style.display = 'none';
    document.getElementById('gameControls').style.display = 'flex';
    document.getElementById('gameInfo').style.display = 'block';
    document.getElementById('minesGame').style.display = 'grid';
};

// ---------------- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ ----------------
document.getElementById('backButton').onclick = function(){
    document.getElementById('minesGameScreen').style.display = 'none';
    showSection('games');
};

// ---------------- –ù–∞—á–∞—Ç—å –∏–≥—Ä—É ----------------
document.getElementById('startGame').onclick = function(){
    stake = parseInt(document.getElementById('stakeSelect').value);
    totalMines = parseInt(document.getElementById('minesSelect').value);

    if(playerData.balance < stake){
        alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–∞–Ω—Å–∞ –¥–ª—è —Å—Ç–∞–≤–∫–∏!');
        return;
    }

    multiplier = 1;
    revealed = [];
    mines = [];
    gameActive = true;

    document.getElementById('multiplier').innerText = multiplier.toFixed(2);
    document.getElementById('balanceGame').innerText = playerData.balance;

    const gameDiv = document.getElementById('minesGame');
    gameDiv.innerHTML = '';

    while(mines.length < totalMines){
        let r = Math.floor(Math.random() * gridSize * gridSize);
        if(!mines.includes(r)) mines.push(r);
    }

    for(let i=0;i<gridSize*gridSize;i++){
        let btn = document.createElement('div');
        btn.className = 'mineCell';
        btn.dataset.index = i;

        let img = document.createElement('img');
        img.src = 'images/question.png'; // –æ—Å—Ç–∞–≤–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å
        img.style.width = '40px';
        img.style.height = '40px';
        btn.appendChild(img);

        btn.onclick = clickCell;
        gameDiv.appendChild(btn);
    }
};

// ---------------- –ö–ª–∏–∫ –ø–æ –∫–ª–µ—Ç–∫–µ ----------------
function clickCell(){
    if(!gameActive) return;
    let idx = parseInt(this.dataset.index);
    if(revealed.includes(idx)) return;

    revealed.push(idx);
    this.innerHTML = '';
    let img = document.createElement('img');
    img.style.width = '40px';
    img.style.height = '40px';

    if(mines.includes(idx)){
        img.src = 'images/mine_new.png'; // –Ω–æ–≤–∞—è –º–∏–Ω–∞
        this.appendChild(img);
        this.style.background = '#e74c3c';
        showAllMines();
        alert('–í—ã –Ω–∞—Ç–∫–Ω—É–ª–∏—Å—å –Ω–∞ –º–∏–Ω—É! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.');
        playerData.balance -= stake;
        gameActive = false;
        return;
    } else {
        img.src = 'images/safe_new.png'; // –Ω–æ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–ª–µ—Ç–∫–∞
        this.appendChild(img);
        this.style.background = '#2ecc71';
        multiplier *= 1.01 + (totalMines/24);
        document.getElementById('multiplier').innerText = multiplier.toFixed(2);
    }

    if(revealed.length === gridSize*gridSize - totalMines){
        showVictory();
        let win = Math.floor(stake * multiplier);
        playerData.balance += win;
        alert(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–æ—à–ª–∏ –∏–≥—Ä—É –∏ –≤—ã–∏–≥—Ä–∞–ª–∏ ${win} –º–æ–Ω–µ—Ç!`);
        gameActive = false;
    }
    document.getElementById('balanceGame').innerText = playerData.balance;
}

// ---------------- –ü–æ–∫–∞–∑ –≤—Å–µ—Ö –º–∏–Ω ----------------
function showAllMines(){
    document.querySelectorAll('.mineCell').forEach((cell, idx)=>{
        if(mines.includes(idx)){
            cell.innerHTML = '';
            let img = document.createElement('img');
            img.src = 'images/mine_new.png';
            img.style.width = '40px';
            img.style.height = '40px';
            cell.appendChild(img);
            cell.style.background = '#e74c3c';
        }
    });
}

// ---------------- –ü–æ–∫–∞–∑ –ø–æ–±–µ–¥—ã ----------------
function showVictory(){
    document.querySelectorAll('.mineCell').forEach((cell, idx)=>{
        if(!mines.includes(idx)){
            cell.innerHTML = '';
            let img = document.createElement('img');
            img.src = 'images/safe_new.png';
            img.style.width = '40px';
            img.style.height = '40px';
            cell.appendChild(img);
            cell.style.background = '#2ecc71';
        }
    });
}

// ---------------- –ó–∞–±—Ä–∞—Ç—å –≤—ã–∏–≥—Ä—ã—à ----------------
document.getElementById('cashOut').onclick = function(){
    if(!gameActive) return;
    let win = Math.floor(stake * multiplier);
    playerData.balance += win;
    alert(`–í—ã –∑–∞–±—Ä–∞–ª–∏: ${win} –º–æ–Ω–µ—Ç!`);
    gameActive = false;
    document.getElementById('balanceGame').innerText = playerData.balance;
};

showSection('profile');
</script>
</body>
</html>
